(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{243:function(e,t,a){e.exports=a(370)},370:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(47),c=a.n(s),o=a(19),l=a(20),i=a(226),u=(a(251),a(13)),m=a(14),p=a(16),E=a(15),d=a(390),h=a(22),g="/",f="/signup",v="/inbox",b="/inbox/sent",y="/inbox/:id",_="/inbox/delete/:id",O="/compose",S=a(24),j=a.n(S),R=a(8),A=a(50),I=a(133),C=a.n(I),L="/auth",k="/messages",x=C.a.create({baseURL:L}),w=C.a.create({baseURL:k}),D=a(40),M=Object(D.a)();function T(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{headers:{"x-access-token":e.accessToken,"Content-Type":"application/json"}}:{}}var N=function(){return function(){var e=Object(A.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=JSON.parse(localStorage.getItem("user")))||t({type:"USER_LOADED",payload:{}}),t({type:"USER_LOADED",payload:Object(R.a)({},a)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){return function(e){e({type:"EMPTY_MESSAGES"})}},U=function(){return function(e){e({type:"CLEAR_EMPTY"})}},H=function(e){return function(){var t=Object(A.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"ACTIVE_SCREENLOADER",payload:{}}),t.next=4,w.get("/message/".concat(e),T());case 4:(n=t.sent).data.success?(a({type:"FETCH_MESSAGE",payload:{message:n.data.message,messageUserData:n.data.messageUserData}}),setTimeout((function(){a({type:"DISABLE_SCREENLOADER",payload:{}})}),200)):(a({type:"FAILEDSHOW_MESSAGE",payload:n.data}),setTimeout((function(){a({type:"DISABLE_SCREENLOADER",payload:{}})}),200)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"DISABLE_SCREENLOADER",payload:{}}),a(V("SERVER_ERROR_SHOW",t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},G=function(){return function(e){e({type:"CLEAR_FAILEDSHOW_MESSAGE"})}},V=function(e,t){return{type:e,payload:t,error:!0}},B=a(12),P=a(394),W=a(83),Y=a(391),z=a(400),Z=a(401),J=function(e){var t=e.full_name,a=e.email;return r.a.createElement(Y.a,{trigger:r.a.createElement(W.a,{name:"user"}),flowing:!0,hoverable:!0},r.a.createElement(z.a,{centered:!0},r.a.createElement(z.a.Column,{textAlign:"center"},r.a.createElement(Z.a,{as:"h4"},"Hello: ",t),r.a.createElement("p",null,a))))},q=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.isAuth()}},{key:"renderUserLinks",value:function(){var e=this,t=this.props,a=t.full_name,n=t.isLoggedIn,s=t.email;return n?r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a.Item,null,r.a.createElement(J,{full_name:a,email:s})),r.a.createElement(P.a.Item,{onClick:function(){return e.props.signOut()}},r.a.createElement(W.a,{name:"sign out alternate",circular:!0}),"Sign Out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a.Item,{as:B.a,to:g,className:"nav-link"},"Sign In"),r.a.createElement(P.a.Item,{as:B.a,to:f,className:"nav-link"},"Sign Up"))}},{key:"render",value:function(){var e=this.props.isLoggedIn;return r.a.createElement(P.a,{pointing:!0,fluid:!0,inverted:!0},e?r.a.createElement(P.a.Item,{as:B.a,to:v},"Home"):r.a.createElement(P.a.Item,{as:B.a,to:g},"Messaging System"),r.a.createElement(P.a.Menu,{position:"right",id:"sys-navbar"},this.renderUserLinks()))}}]),a}(r.a.Component),K=Object(o.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,full_name:e.auth.full_name,email:e.auth.email}}),{isAuth:N,signOut:function(){return function(){var e=Object(A.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("user"),t({type:"SIGN_OUT",payload:{}}),M.push(g);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(q),X=a(395),$=a(393),Q=a(392),ee=a(398),te=a(403),ae=a(371),ne=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).renderInput=function(t){var a=t.input,n=t.label,s=t.meta,c=t.type,o=t.icon;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a.Input,Object.assign({fluid:!0,icon:o,iconPosition:"left",placeholder:n},a,{type:c})),e.renderError(s))},e.onSubmit=function(t){e.props.onSubmit(t)},e}return Object(m.a)(a,[{key:"renderError",value:function(e){var t=e.error;if(e.touched&&t)return r.a.createElement(ee.a,{negative:!0},r.a.createElement("p",null,t))}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.pristine,n=e.submitting,s=e.title,c=e.serverError,o=e.screen_loader_active;return r.a.createElement(Q.a,{size:"large",onSubmit:t(this.onSubmit)},r.a.createElement(te.a,{stacked:!0},r.a.createElement(Z.a,{as:"h2",color:"teal",textAlign:"center"},s),r.a.createElement(X.a,{icon:"mail",name:"email",type:"text",component:this.renderInput,label:"Enter Email"}),r.a.createElement(X.a,{icon:"lock",name:"password",type:"password",component:this.renderInput,label:"Enter Password"}),r.a.createElement(ae.a,{loading:o,color:"teal",fluid:!0,size:"large",type:"submit",disabled:a||n},"Sign In"),c&&r.a.createElement(ee.a,{negative:!0},c),r.a.createElement(ee.a,null,"New to us? ",r.a.createElement(B.a,{to:f},"Sign Up"))))}}]),a}(r.a.Component),re=Object($.a)({form:"signIn",validate:function(e){var t,a={};if(e.email){a.email=(t=e.email)&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t)?"Invalid email address":void 0}return e.email||(a.email="You must enter an Email"),e.password||(a.password="You must enter a Password"),a}})(ne),se=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.signIn(t)},e}return Object(m.a)(a,[{key:"renderSignInIfAuth",value:function(){return this.props.isLoggedIn?r.a.createElement(h.a,{to:"/inbox"}):r.a.createElement(z.a,{textAlign:"center",style:{height:"90vh"},verticalAlign:"middle"},r.a.createElement(z.a.Column,{style:{maxWidth:450}},r.a.createElement(re,{screen_loader_active:this.props.screen_loader_active,serverError:this.props.serverError,title:"Sign In",onSubmit:this.onSubmit})))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderSignInIfAuth())}}]),a}(r.a.Component),ce=Object(o.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,serverError:e.auth.failed_signin_error,screen_loader_active:e.loader.screen_loader_active}}),{signIn:function(e){return function(){var t=Object(A.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ACTIVE_SCREENLOADER",payload:{}}),t.prev=1,t.next=4,x.post("/login",Object(R.a)({},e));case 4:if((n=t.sent).data.success){t.next=9;break}return a({type:"FAILED_SIGNIN",payload:n.data.error}),a({type:"DISABLE_SCREENLOADER",payload:{}}),t.abrupt("return",setTimeout((function(){return a({type:"CLEAR_ERROR",payload:{}})}),4e3));case 9:localStorage.setItem("user",JSON.stringify(n.data)),a({type:"SIGN_IN",payload:n.data}),a({type:"DISABLE_SCREENLOADER",payload:{}}),M.push(v),t.next=20;break;case 15:return t.prev=15,t.t0=t.catch(1),a({type:"FAILED_SIGNIN",payload:t.t0.message}),a({type:"DISABLE_SCREENLOADER",payload:{}}),t.abrupt("return",setTimeout((function(){return a({type:"CLEAR_ERROR",payload:{}})}),4e3));case 20:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()}})(se),oe=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).renderInput=function(t){var a=t.input,n=t.label,s=t.meta,c=t.type,o=t.icon;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a.Input,Object.assign({fluid:!0,icon:o,iconPosition:"left",placeholder:n},a,{type:c})),e.renderError(s))},e.onSubmit=function(t){e.props.onSubmit(t)},e}return Object(m.a)(a,[{key:"renderError",value:function(e){var t=e.error;if(e.touched&&t)return r.a.createElement(ee.a,{negative:!0},r.a.createElement("p",null,t))}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.pristine,n=e.submitting,s=e.title,c=e.serverError,o=e.screen_loader_active;return r.a.createElement(Q.a,{size:"large",onSubmit:t(this.onSubmit)},r.a.createElement(te.a,{stacked:!0},r.a.createElement(Z.a,{as:"h2",color:"teal",textAlign:"center"},s),r.a.createElement(X.a,{icon:"mail",name:"email",type:"text",component:this.renderInput,label:"Enter Email"}),r.a.createElement(X.a,{icon:"lock",name:"password",type:"password",component:this.renderInput,label:"Enter Password"}),r.a.createElement(X.a,{icon:"user",name:"full_name",type:"text",component:this.renderInput,label:"Enter A Full Name"}),c&&r.a.createElement(ee.a,{negative:!0},c),r.a.createElement(ae.a,{loading:o,color:"teal",fluid:!0,size:"large",type:"submit",disabled:a||n},"Sign Up")))}}]),a}(r.a.Component),le=Object($.a)({form:"singUp",validate:function(e){var t,a={};if(e.email){a.email=(t=e.email)&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t)?"Invalid email address":void 0}return e.email||(a.email="You must enter an Email"),e.password||(a.password="You must enter a Password"),e.full_name||(a.full_name="You must enter a Full Name"),a}})(oe),ie=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.signUp(t)},e}return Object(m.a)(a,[{key:"renderSignInIfAuth",value:function(){return this.props.isLoggedIn?r.a.createElement(h.a,{to:"/inbox"}):r.a.createElement(z.a,{textAlign:"center",style:{height:"90vh"},verticalAlign:"middle"},r.a.createElement(z.a.Column,{style:{maxWidth:450}},r.a.createElement(le,{validate:this.validate,screen_loader_active:this.props.screen_loader_active,serverError:this.props.serverError,title:"Sign Up",onSubmit:this.onSubmit})))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderSignInIfAuth())}}]),a}(r.a.Component),ue=Object(o.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,serverError:e.auth.failed_signup_error,screen_loader_active:e.loader.screen_loader_active}}),{signUp:function(e){return function(){var t=Object(A.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ACTIVE_SCREENLOADER",payload:{}}),t.prev=1,t.next=4,x.post("/register",Object(R.a)({},e));case 4:if((n=t.sent).data.success){t.next=9;break}return a({type:"FAILED_SIGNUP",payload:n.data.error}),a({type:"DISABLE_SCREENLOADER",payload:{}}),t.abrupt("return",setTimeout((function(){return a({type:"CLEAR_ERROR",payload:n.data.error})}),4e3));case 9:a({type:"DISABLE_SCREENLOADER",payload:{}}),M.push(g),t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),a({type:"FAILED_SIGNUP",payload:t.t0.message}),a({type:"DISABLE_SCREENLOADER",payload:{}}),t.abrupt("return",setTimeout((function(){a({type:"CLEAR_ERROR",payload:{}})}),4e3));case 18:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}})(ie),me=function(){return r.a.createElement(te.a,{placeholder:!0},r.a.createElement(Z.a,{icon:!0},r.a.createElement(W.a,{name:"exclamation"}),"Ops... we couldn't find the page you're looking for"),r.a.createElement(ae.a,{as:B.a,to:g,color:"blue"},"Back Home"))},pe=function(e){var t=e.serverErrorMessage,a=e.dismiss;return r.a.createElement(ee.a,{negative:!0,onDismiss:function(){return a()},style:{position:"fixed",bottom:0,width:"100%"}},r.a.createElement(ee.a.Header,null,t),r.a.createElement("p",null,"Please try again later"))},Ee=a(108),de=a.n(Ee),he=a(396),ge=a(387),fe=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={textValue:""},e}return Object(m.a)(a,[{key:"handelChange",value:function(e){this.setState({textValue:e.target.value})}},{key:"renderRecivedOrSent",value:function(e){switch(this.props.type){case"recived":return"".concat(e.user.email);case"sent":return"".concat(e.senderEmail);default:return""}}},{key:"renderTable",value:function(){var e=this,t=this.state.textValue;return de.a.orderBy(this.props.messages,["id"],["desc"]).filter((function(e){return""===t.toLowerCase()||(!(!e.subject.includes(t.toLowerCase())&&!e.message.includes(t.toLowerCase()))||void 0)})).map((function(t){return r.a.createElement(he.a.Row,{key:t.id},r.a.createElement(he.a.Cell,{width:3},e.renderRecivedOrSent(t)),r.a.createElement(he.a.Cell,null,r.a.createElement(B.a,{to:"/inbox/".concat(t.id)}," ",t.subject," - ",t.message)),r.a.createElement(he.a.Cell,{width:2,textAlign:"center"},r.a.createElement(ae.a,{variant:"secondary",as:B.a,to:"/inbox/delete/".concat(t.id)},"Delete")))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.tableHeader,n=t.messages;return r.a.createElement(te.a,null,n.length<=1?null:r.a.createElement(ge.a,{onChange:function(t){return e.handelChange(t)},icon:"search",iconPosition:"left",placeholder:"Search..."}),r.a.createElement(he.a,{celled:!0,striped:!0},r.a.createElement(he.a.Header,null,r.a.createElement(he.a.Row,null,r.a.createElement(he.a.HeaderCell,{colSpan:"3"},a))),r.a.createElement(he.a.Header,null,r.a.createElement(he.a.Row,null,r.a.createElement(he.a.HeaderCell,null,"recived"===this.props.type?"From":"To"),r.a.createElement(he.a.HeaderCell,null,"Subject and Content"),r.a.createElement(he.a.HeaderCell,null))),r.a.createElement(he.a.Body,null,this.renderTable())))}}]),a}(r.a.Component),ve=function(e){var t=e.icon,a=e.content,n=e.actions;return r.a.createElement(te.a,{placeholder:!0},r.a.createElement(Z.a,{icon:!0},r.a.createElement(W.a,{name:t}),a),r.a.createElement(te.a.Inline,null,n))},be=a(402),ye=a(389),_e=function(e){var t=e.active;return r.a.createElement(be.a,{active:t,inverted:!0},r.a.createElement(ye.a,null))},Oe=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetachReciveMessages()}},{key:"componentWillUnmount",value:function(){this.props.empty_messages&&this.props.clearEmptyMessages()}},{key:"renderActions",value:function(){return r.a.createElement(ae.a,{as:B.a,to:O},"Compose")}},{key:"renderEmptyOrTable",value:function(){var e=this.props,t=e.screen_loader_active,a=e.empty_messages,n=e.messages,s=e.serverError;return t?null:a||s?r.a.createElement(ve,{icon:"inbox",content:"You don't have any messages in the inbox",actions:this.renderActions()}):r.a.createElement(fe,{tableHeader:"Inbox",type:"recived",messages:n})}},{key:"render",value:function(){var e=this.props.screen_loader_active;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{active:e}),this.renderEmptyOrTable())}}]),a}(r.a.Component),Se=Object(o.b)((function(e){return{messages:Object.values(e.messages.recived),empty_messages:e.messages.empty_messages,screen_loader_active:e.loader.screen_loader_active,serverError:e.internalServerError.error}}),{fetachReciveMessages:function(){return function(){var e=Object(A.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"ACTIVE_SCREENLOADER",payload:{}}),e.next=4,w.get("/message",T());case 4:(a=e.sent).data&&(t({type:"FETCH_RECIVEMESSAGES",payload:a.data.response}),0===a.data.response.length&&t(F()),setTimeout((function(){t({type:"DISABLE_SCREENLOADER",payload:{}})}),200)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"DISABLE_SCREENLOADER",payload:{}}),t(V("SERVER_ERROR_SHOW",e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},clearEmptyMessages:U})(Oe),je=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetachSentMessages()}},{key:"componentWillUnmount",value:function(){this.props.empty_messages&&this.props.clearEmptyMessages()}},{key:"renderActions",value:function(){return r.a.createElement(ae.a,{as:B.a,to:O},"Compose")}},{key:"renderEmptyOrTable",value:function(){var e=this.props,t=e.screen_loader_active,a=e.empty_messages,n=e.messages,s=e.serverError;return t?null:a||s?r.a.createElement(ve,{icon:"send",content:"You don't have any sent messages",actions:this.renderActions()}):r.a.createElement(fe,{tableHeader:"Sent",type:"sent",messages:n})}},{key:"render",value:function(){var e=this.props.screen_loader_active;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{active:e}),this.renderEmptyOrTable())}}]),a}(r.a.Component),Re=Object(o.b)((function(e){return{messages:Object.values(e.messages.sent),empty_messages:e.messages.empty_messages,screen_loader_active:e.loader.screen_loader_active,serverError:e.internalServerError.error}}),{fetachSentMessages:function(){return function(){var e=Object(A.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"ACTIVE_SCREENLOADER",payload:{}}),e.next=4,w.get("/message/?filter=sent",T());case 4:(a=e.sent).data&&(t({type:"FETCH_SENTMESSAGES",payload:a.data.response}),0===a.data.response.length&&t(F()),setTimeout((function(){t({type:"DISABLE_SCREENLOADER",payload:{}})}),200)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"DISABLE_SCREENLOADER",payload:{}}),t(V("SERVER_ERROR_SHOW",e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},clearEmptyMessages:U})(je),Ae=a(388),Ie=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).renderText=function(t){var a=t.input,n=t.label,s=t.type,c=t.meta;return"text-area"===s?r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a.Input,Object.assign({control:Ae.a,placeholder:n},a,{type:s})),e.renderError(c)):r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a.Input,Object.assign({placeholder:n},a,{type:s})),e.renderError(c))},e.renderSelectField=function(t){var a=t.input,n=(t.label,t.type,t.meta),s=t.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a.Field,Object.assign({},a,{control:"select"}),r.a.createElement("option",null),s),e.renderError(n))},e.onSubmit=function(t){e.props.onSubmit(t)},e}return Object(m.a)(a,[{key:"renderError",value:function(e){var t=e.error;if(e.touched&&t)return r.a.createElement(ee.a,{negative:!0},r.a.createElement("p",null,t))}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.pristine,n=e.submitting,s=e.error,c=e.header,o=e.screen_loader_active;return r.a.createElement(Q.a,{size:"big",onSubmit:t(this.onSubmit),loading:o},r.a.createElement(te.a,{stacked:!0},r.a.createElement(Z.a,{as:"h2",color:"grey",textAlign:"center"},c),r.a.createElement(X.a,{name:"reciver",validate:Ce,type:"select",component:this.renderSelectField},this.props.users.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.email)}))),r.a.createElement(X.a,{name:"subject",validate:Ce,type:"text",component:this.renderText,label:"Enter Subject"}),r.a.createElement(X.a,{name:"message",validate:Ce,type:"text-area",component:this.renderText,label:"Enter Message"}),s&&r.a.createElement("strong",null,s),r.a.createElement(ae.a,{color:"blue",disabled:a||n},"Compose")))}}]),a}(r.a.Component),Ce=function(e){return e?void 0:"Required"},Le=Object($.a)({form:"compose"})(Ie),ke=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.createMessage(t)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"render",value:function(){var e=this.props.screen_loader_active;return r.a.createElement(z.a,{textAlign:"center",style:{height:"70vh"},verticalAlign:"middle"},r.a.createElement(z.a.Column,{style:{maxWidth:550}},r.a.createElement(Le,{screen_loader_active:e,header:"Compose",onSubmit:this.onSubmit,users:this.props.users})))}}]),a}(r.a.Component),xe=Object(o.b)((function(e){return{users:Object.values(e.messages.users),screen_loader_active:e.loader.screen_loader_active}}),{fetchUsers:function(){return function(){var e=Object(A.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"ACTIVE_SCREENLOADER",payload:{}}),e.next=4,w.get("/users",T());case 4:(a=e.sent).data.success?(t({type:"FETCH_USERS",payload:a.data.response}),setTimeout((function(){t({type:"DISABLE_SCREENLOADER",payload:{}})}),100)):(alert(a.data.error),setTimeout((function(){t({type:"DISABLE_SCREENLOADER",payload:{}})}),100)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"DISABLE_SCREENLOADER",payload:{}}),t(V("SERVER_ERROR_SHOW",e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},createMessage:function(e){return function(){var t=Object(A.a)(j.a.mark((function t(a){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={reciver:parseInt(e.reciver),message:e.message,subject:e.subject},t.next=3,w.post("/message",Object(R.a)({},n),T());case 3:(r=t.sent).data.success?(a({type:"CREATE_MESSAGE",payload:r.data.response}),M.push(b)):(M.push(b),a(V("SERVER_ERROR_SHOW",r.data.message)));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(ke),we=a(230),De=a(397),Me=function(e){var t=e.title,a=e.actions,n=e.content,s=e.closeModalPath,o=e.icon;return c.a.createPortal(r.a.createElement(De.a,{closeIcon:!0,open:!0,centered:!0,onClose:function(){return M.push(s)}},r.a.createElement(Z.a,{icon:o,content:t}),r.a.createElement(De.a.Content,null,r.a.createElement("p",null,n)),r.a.createElement(De.a.Actions,null,a)),document.querySelector("#modal"))},Te=function(){return r.a.createElement(Me,{closeModalPath:g,title:"You Unauthorized",icon:"lock",content:"Please Sign In Before!",actions:r.a.createElement(ae.a,{as:B.a,to:g,color:"blue"},"SignIn")})},Ne=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.path;return r.a.createElement(P.a,{fluid:!0,vertical:!0},r.a.createElement(P.a.Item,{name:"inbox",active:e===v,as:B.a,to:v},r.a.createElement(W.a,{name:"mail"}),"Inbox"),r.a.createElement(P.a.Item,{name:"Sent",active:e===b,as:B.a,to:b},r.a.createElement(W.a,{name:"send"}),"Sent"),r.a.createElement(P.a.Item,{name:"compose",as:B.a,to:O},r.a.createElement(W.a,{name:"pencil"}),"Compose"))}}]),a}(r.a.Component),Fe=function(e){var t=e.children,a=e.path;return r.a.createElement(z.a,{stackable:!0,padded:!0},r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Column,{width:3},r.a.createElement(Ne,{path:a})),r.a.createElement(z.a.Column,{width:12},t)))},Ue=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.isAuth()}},{key:"render",value:function(){var e=this.props,t=e.component,a=e.auth,n=e.path,s=Object(we.a)(e,["component","auth","path"]);return r.a.createElement(h.b,Object.assign({},s,{render:function(e){return a.isLoggedIn?r.a.createElement(Fe,{path:n},r.a.createElement(t,e)):r.a.createElement(Te,null)}}))}}]),a}(r.a.Component),He=Object(o.b)((function(e){return{auth:e.auth}}),{isAuth:N})(Ue),Ge=function(e){var t=e.header,a=e.sent,n=e.reciver,s=e.subject,c=e.content;return r.a.createElement(te.a,{placeholder:!0},r.a.createElement(te.a.Group,null,r.a.createElement(te.a,{textAlign:"center"},r.a.createElement(Z.a,null,t)),r.a.createElement(te.a.Group,null,r.a.createElement(te.a,{textAlign:"center"},"From: ",a),r.a.createElement(te.a,{textAlign:"center"},"To: ",n),r.a.createElement(te.a,{textAlign:"center"},"Subject: ",s),r.a.createElement(te.a,{textAlign:"center"},"Message content: ",c)),r.a.createElement(te.a,null,r.a.createElement(ae.a,{as:B.a,to:v},"Back To Inbox"))))},Ve=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match;this.props.fetchMessage(e.params.id)}},{key:"componentWillUnmount",value:function(){this.props.failed_show_message&&this.props.cleareFailedShowMessage()}},{key:"renderMessageView",value:function(){var e=this.props,t=e.message,a=e.mail,n=e.user,s=e.failed_show_message;e.match;return e.screen_loader_active?null:s?r.a.createElement(Me,{icon:"thumbs down",closeModalPath:v,title:t.error,content:"Ho no, it seems like you try to reach a message that you can't view",actions:r.a.createElement(ae.a,{as:B.a,to:v,color:"blue"},"Back to inbox")}):t.sender===n.userId?r.a.createElement(Ge,{header:"Message ".concat(t.subject),sent:n.email,reciver:a.email,subject:t.subject,content:t.message}):r.a.createElement(Ge,{header:"Message ".concat(t.subject),sent:a.email,reciver:n.email,subject:t.subject,content:t.message})}},{key:"render",value:function(){var e=this.props.screen_loader_active;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{active:e}),this.renderMessageView())}}]),a}(r.a.Component),Be=Object(o.b)((function(e){return{message:e.messages.s_message,mail:e.messages.extra_s_message,user:e.auth,failed_show_message:e.messages.failed_show_message,screen_loader_active:e.loader.screen_loader_active}}),{fetchMessage:H,cleareFailedShowMessage:G})(Ve),Pe=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchMessage(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.failed_show_message&&this.props.cleareFailedShowMessage()}},{key:"renderActions",value:function(){var e=this,t=this.props.match.params.id,a=this.props,n=a.currentUserId,s=a.messageToDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{onClick:function(){return e.props.deleteMessage(t,n,s.sender)},color:"red"},"Delete"),r.a.createElement(ae.a,{as:B.a,to:n===s.sender?b:v},"Cancel"))}},{key:"renderModal",value:function(){var e=this.props,t=e.currentUserId,a=e.messageToDelete;return e.failed_show_message?r.a.createElement(Me,{icon:"thumbs down",closeModalPath:v,title:a.error,content:"",actions:r.a.createElement(ae.a,{as:B.a,to:v},"Cancel")}):r.a.createElement(Me,{icon:"archive",closeModalPath:t===a.sender?b:v,title:"Delete Message",content:"Are you sure you want to delete the message: ".concat(a.subject,"?"),actions:this.renderActions()})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderModal())}}]),a}(r.a.Component),We=Object(o.b)((function(e){return{messageToDelete:e.messages.s_message,currentUserId:e.auth.userId,failed_show_message:e.messages.failed_show_message}}),{fetchMessage:H,deleteMessage:function(e,t,a){return function(){var n=Object(A.a)(j.a.mark((function n(r){var s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.delete("/message/".concat(e),T());case 2:if(!(s=n.sent).data.success){n.next=10;break}if(r({type:"DELETE_MESSAGE",payload:e}),t!==a){n.next=7;break}return n.abrupt("return",M.push(b));case 7:M.push(v),n.next=12;break;case 10:M.push(v),r(V("SERVER_ERROR_SHOW",s.data.error));case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},cleareFailedShowMessage:G})(Pe),Ye=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).cleanServerError=function(){e.props.serverErrorCleanUp()},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.serverError,a=e.serverErrorMessage;return r.a.createElement(d.a,{fluid:!0},r.a.createElement(h.c,{history:M},r.a.createElement(K,null),r.a.createElement(h.d,null,r.a.createElement(h.b,{path:g,exact:!0,component:ce}),r.a.createElement(h.b,{path:f,exact:!0,component:ue}),r.a.createElement(He,{exact:!0,path:v,component:Se}),r.a.createElement(He,{exact:!0,path:b,component:Re}),r.a.createElement(He,{exact:!0,path:y,component:Be}),r.a.createElement(He,{exact:!0,path:_,component:We}),r.a.createElement(He,{path:O,exact:!0,component:xe}),r.a.createElement(h.b,{path:"*",component:me})),t&&r.a.createElement(pe,{dismiss:this.cleanServerError,serverErrorMessage:a})))}}]),a}(r.a.Component),ze=Object(o.b)((function(e){return{serverError:e.internalServerError.error,serverErrorMessage:e.internalServerError.errorMessage}}),{serverErrorCleanUp:function(){return function(e){return e({type:"SERVER_ERROR_CLEAN",payload:{}})}}})(Ye),Ze=a(399),Je={isLoggedIn:!1,userId:null,email:null,full_name:null,isLoading:!1,failed_signin_error:null,failed_signup_error:null},qe=a(132),Ke={recived:{},sent:{},s_message:{},extra_s_message:{},users:{},empty_messages:!1,failed_show_message:!1},Xe={screen_loader_active:!1},$e={error:null,errorMessage:""},Qe=Object(l.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(R.a)(Object(R.a)({},e),{},{isLoggedIn:t.payload.isLoggedIn,userId:t.payload.id,email:t.payload.email,full_name:t.payload.full_name});case"SIGN_OUT":return Object(R.a)(Object(R.a)({},e),Je);case"USER_LOADED":return Object(R.a)(Object(R.a)({},e),{},{isLoggedIn:t.payload.isLoggedIn,userId:t.payload.id,email:t.payload.email,full_name:t.payload.full_name,isLoading:t.payload.isLoading});case"FAILED_SIGNIN":return Object(R.a)(Object(R.a)({},e),{},{failed_signin_error:t.payload});case"FAILED_SIGNUP":return Object(R.a)(Object(R.a)({},e),{},{failed_signup_error:t.payload});case"CLEAR_ERROR":return Object(R.a)(Object(R.a)({},e),{},{failed_signin_error:null,failed_signup_error:null});default:return e}},form:Ze.a,messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_RECIVEMESSAGES":return Object(R.a)(Object(R.a)({},e),{},{recived:de.a.mapKeys(t.payload,"id"),empty_messages:!1});case"FETCH_SENTMESSAGES":return Object(R.a)(Object(R.a)({},e),{},{sent:de.a.mapKeys(t.payload,"id"),empty_messages:!1});case"FETCH_MESSAGE":return Object(R.a)(Object(R.a)({},e),{},{s_message:t.payload.message,extra_s_message:t.payload.messageUserData,failed_show_message:!1});case"FAILEDSHOW_MESSAGE":return Object(R.a)(Object(R.a)({},e),{},{failed_show_message:!0,s_message:t.payload});case"CLEAR_FAILEDSHOW_MESSAGE":return Object(R.a)(Object(R.a)({},e),{},{failed_show_message:!1,s_message:{},extra_s_message:{}});case"FETCH_USERS":return Object(R.a)(Object(R.a)({},e),{},{users:de.a.mapKeys(t.payload,"id")});case"CREATE_MESSAGE":return Object(R.a)(Object(R.a)({},e),{},{sent:Object(qe.a)({},t.payload.id,t.payload)});case"DELETE_MESSAGE":return Object(R.a)(Object(R.a)({},e),{},{s_message:{},extra_s_message:{}});case"SIGN_OUT":return Object(R.a)(Object(R.a)({},e),Ke);case"EMPTY_MESSAGES":return Object(R.a)(Object(R.a)({},e),{},{empty_messages:!0});case"CLEAR_EMPTY":return Object(R.a)(Object(R.a)({},e),{},{empty_messages:!1});default:return e}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACTIVE_SCREENLOADER":return Object(R.a)(Object(R.a)({},e),{},{screen_loader_active:!0});case"DISABLE_SCREENLOADER":return Object(R.a)(Object(R.a)({},e),Xe);default:return e}},internalServerError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SERVER_ERROR_SHOW":return Object(R.a)(Object(R.a)({},e),{},{error:!0,errorMessage:t.payload});case"SERVER_ERROR_CLEAN":return Object(R.a)(Object(R.a)({},e),$e);default:return e}}}),et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,tt=Object(l.e)(Qe,et(Object(l.a)(i.a)));c.a.render(r.a.createElement(o.a,{store:tt},r.a.createElement(ze,null)),document.querySelector("#root"))}},[[243,1,2]]]);
//# sourceMappingURL=main.f63c2c2b.chunk.js.map